// Core9 - Module: module-cms-features
angular.module("core9Dashboard.feature.config",["core9Dashboard.config","ui.bootstrap"]).config(["$stateProvider",function(a){a.state("features.settings",{url:"/config/features/settings",controller:"FeaturesConfigurationCtrl",templateUrl:"features/config/configuration.tpl.html",data:{context:"back"}})}]).controller("FeaturesConfigurationCtrl",["$scope","ConfigFactory","$http","$modal",function(a,b,c,d){a.publicrepos=b.query({configtype:"featuresrepo_public"}),a.privaterepos=b.query({configtype:"featuresrepo_private"}),a.add=function(c){var d=new b;d.configtype=c,"featuresrepo_public"===c?a.publicrepos.push(d):a.privaterepos.push(d),a.edit(d)},a.edit=function(a){var b=d.open({templateUrl:"features/config/edit.tpl.html",controller:"FeaturesConfigurationEditRepoCtrl",resolve:{repo:function(){return a}}});b.result.then(function(b){a=b})},a.download=function(b){c.post("/admin/featurerepository/"+b._id+"?pull").success(function(){alert("Success")}).error(function(b){a.$emit("$error",b)})},a.upload=function(b){c.post("/admin/featurerepository/"+b._id+"?push").success(function(){alert("Success")}).error(function(b){a.$emit("$error",b)})},a.delete=function(a,b,c){a.$remove(function(){b.splice(c,1)})}}]).controller("FeaturesConfigurationEditRepoCtrl",["$scope","$modalInstance","repo",function(a,b,c){a.repo=c,a.save=function(){void 0===a.repo._id?a.repo.$save(function(a){b.close(a)}):a.repo.$update(function(a){b.close(a)})}}]),angular.module("core9Dashboard.feature",["ui.router","core9Dashboard.menu","core9Dashboard.config","core9Dashboard.content","core9Dashboard.feature.public","core9Dashboard.feature.private","core9Dashboard.feature.config","core9Dashboard.feature.processor.content","core9Dashboard.feature.processor.config"]).config(["$stateProvider",function(a){a.state("features",{"abstract":!0,views:{main:{template:"<div ui-view></div>"}},data:{pageTitle:"Feature",context:"features",sidebar:"config"}}).state("features.list",{url:"/config/features",controller:"ConfigFeaturesListCtrl",templateUrl:"features/features.tpl.html"}).state("features.edit",{url:"/config/features/:repo/{feature:.*}",controller:"ConfigFeaturesFeatureCtrl",templateUrl:"features/feature.tpl.html"})}]).controller("ConfigFeaturesListCtrl",["$scope","$state","ConfigFactory","$http",function(a,b,c,d){a.loading="",a.download=function(b){d.post("/admin/featurerepository/"+b._id+"?pull").success(function(){b.$get(),alert("Repository downloaded")}).error(function(b){a.$emit("$error",b)})},a.deactivate=function(b,c){a.loading=c.name;var e={repo:b._id,feature:c.name};d.post("/admin/features/disable",e).success(function(){b.$get(),a.loading=""}).error(function(b){a.$emit("$error",b),a.loading=""})},a.apply=function(b,c,e){a.loading=c.name;var f={repo:b._id,feature:c.name,version:e};d.post("/admin/features/apply",f).success(function(){a.loading=""}).error(function(b){a.$emit("$error",b),a.loading=""})}}]).controller("ConfigFeaturesFeatureCtrl",["$scope","$http","$state","$stateParams",function(a,b,c,d){b.get("/admin/featurerepository/"+d.repo+"/"+encodeURIComponent(d.feature)).success(function(b){a.feature=""===b?{name:d.feature}:b}).error(function(b){a.$emit("$error",b)}),b.get("/admin/features?getTypes").success(function(b){a.featureTypes=b}),a.save=function(){b.put("/admin/featurerepository/"+d.repo+"/"+encodeURIComponent(d.feature),a.feature).success(function(b){a.feature=b,alert("Saved")})},a.removeFeature=function(){var a=confirm("Do you really want to delete the entire feature? Click OK if you are sure.");a&&b["delete"]("/admin/featurerepository/"+d.repo+"/"+encodeURIComponent(d.feature)).success(function(){c.go("features")})},a.removeVersion=function(){var c=confirm("Do you really want to delete this version? Click OK if you are sure.");c&&b["delete"]("/admin/featurerepository/"+d.repo+"/"+encodeURIComponent(d.feature)+"-v"+a.selectedVersion).success(function(b){a.feature=b,a.selectedVersion=!1})},a.addVersion=function(b){void 0===a.feature.versions&&(a.feature.versions=[]),void 0!==b&&null!==b&&""!==b?(a.feature.versions.push(b),a.save()):alert("Enter a version name/number.")},a.saveVersion=function(){b.put("/admin/featurerepository/"+d.repo+"/"+encodeURIComponent(d.feature)+"-v"+a.selectedVersion,a.version).success(function(b){a.version=b,alert("Saved"),a.selectedVersion=!1})},a.updateVersion=function(){b.post("/admin/featurerepository/"+d.repo+"/"+encodeURIComponent(d.feature)+"-v"+a.selectedVersion).success(function(b){a.version=b,alert("Your contents are updated.")})},a.selectedVersion=!1,a.select=function(b){var c=!0;a.selectedVersion!==!1&&(c=confirm("Do you really want to change versions? Your changes will be lost, click save to persist them.")),c&&(a.selectedVersion=b===a.selectedVersion?!1:b)},a.$watch("selectedType",function(b,c){b!==c&&void 0!==b&&void 0===a.version[b]&&(a.version[b]=[])}),a.$watch("selectedVersion",function(c,e){c!==e&&void 0!==c&&c!==!1?b.get("/admin/featurerepository/"+d.repo+"/"+encodeURIComponent(d.feature)+"-v"+a.selectedVersion).success(function(b){a.version=b}):delete a.selectedType})}]).directive("cnFeatureProcessor",["$compile","$templateCache",function(a,b){return{replace:!0,scope:{template:"=cnProcessorTemplate",selected:"=cnSelectedItems"},link:function(c,d){d.html('<div><i class="fa fa-spinner fa-spin"></i> Loading</div>'),a(d.contents())(c),c.$watch("template",function(e,f){e!==f&&void 0!==e&&(d.html(b.get(e)),a(d.contents())(c))})}}}]).run(["MenuService",function(a){a.add("features",{title:"Settings",weight:1,link:"features.settings"}),a.add("config",{title:"Features",weight:300,link:"features.list"})}]),angular.module("core9Dashboard.feature.processor.config",["ui.bootstrap","core9Dashboard.config"]).controller("FeatureProcessorConfigCtrl",["$scope","$modal",function(a,b){a.deselect=function(b){a.$parent.selected.splice(b,1)},a.add=function(){b.open({templateUrl:"features/processor/config.modal.tpl.html",controller:"FeatureProcessorConfigModalCtrl",resolve:{selected:function(){return a.$parent.selected}}})}}]).controller("FeatureProcessorConfigModalCtrl",["$scope","$http","$modalInstance","ConfigFactory","selected",function(a,b,c,d,e){b.get("/admin/config?listtypes").success(function(b){a.configtypes=b}),a.contenttypes=d.query({configtype:"content"}),a.$watch("configtype",function(){void 0!==a.configtype&&(a.configlist=d.query({configtype:a.configtype}))}),a.isSelected=function(a){for(var b=0;b<e.length;b++)if(e[b].id===a)return!0;return!1},a.select=function(a){for(var b=!1,c=0;c<e.length;c++)e[c].id===a._id&&(b=!0,e.splice(c,1));b||e.push({id:a._id,entry:a})},a.ok=function(){c.close()}}]),angular.module("core9Dashboard.feature.processor.content",["core9Dashboard.config","core9Dashboard.config.content","core9Dashboard.content"]).controller("FeatureProcessorContentCtrl",["$scope","$modal",function(a,b){a.deselect=function(b){a.$parent.selected.splice(b,1)},a.add=function(){b.open({templateUrl:"features/processor/content.modal.tpl.html",controller:"FeatureProcessorContentModalCtrl",resolve:{selected:function(){return a.$parent.selected}}})}}]).controller("FeatureProcessorContentModalCtrl",["$scope","$modalInstance","ConfigFactory","ContentFactory","selected",function(a,b,c,d,e){a.contenttypes=c.query({configtype:"content"}),a.$watch("contenttype",function(){void 0!==a.contenttype&&void 0!==a.contenttype.name&&(a.contentlist=d.query({contenttype:a.contenttype.name}))}),a.isSelected=function(b){for(var c=a.contenttype.name+"-"+b,d=0;d<e.length;d++)if(e[d].id===c)return!0;return!1},a.select=function(b){for(var c=!1,d=a.contenttype.name+"-"+b._id,f=0;f<e.length;f++)e[f].id===d&&(c=!0,e.splice(f,1));c||e.push({id:d,entry:b})},a.ok=function(){b.close()}}]),angular.module("core9Dashboard.feature.private",["core9Dashboard.config"]).controller("ConfigFeaturesPrivateCtrl",["$scope","$state","$http","ConfigFactory",function(a,b,c,d){var e=function(b){a.$emit("$error",b)},f=function(b){return function(c){a.features[b]=c}};a.repos=d.query({configtype:"featuresrepo_private"},function(b){a.features={};for(var d=0;d<b.length;d++)void 0===b[d].current&&(b[d].current={}),c.get("/admin/featurerepository/"+b[d]._id).success(f(b[d]._id)).error(e)}),a.add=function(b,c){a.edit(a.repo._id,c)},a.edit=function(a,c){b.go("features.edit",{repo:a._id,feature:c})},a.upload=function(b){c.post("/admin/featurerepository/"+b._id+"?push").success(function(){alert("Repository uploaded")}).error(function(b){a.$emit("$error",b)})}}]),angular.module("core9Dashboard.feature.public",["core9Dashboard.config"]).controller("ConfigFeaturesPublicCtrl",["$scope","$http","ConfigFactory",function(a,b,c){var d=function(b){a.$emit("$error",b)},e=function(b){return function(c){a.features[b]=c}};a.repos=c.query({configtype:"featuresrepo_public"},function(c){a.features={};for(var f=0;f<c.length;f++)void 0===c[f].current&&(c[f].current={}),b.get("/admin/featurerepository/"+c[f]._id).success(e(c[f]._id)).error(d)})}]),angular.module("core9Dashboard.features",["core9Dashboard.feature","templates-module-cms-features"]),angular.module("templates-module-cms-features",["features/config/configuration.tpl.html","features/config/edit.tpl.html","features/feature.tpl.html","features/features.tpl.html","features/processor/config.modal.tpl.html","features/processor/config.tpl.html","features/processor/content.modal.tpl.html","features/processor/content.tpl.html","features/repositories/private.tpl.html","features/repositories/public.tpl.html"]),angular.module("features/config/configuration.tpl.html",[]).run(["$templateCache",function(a){a.put("features/config/configuration.tpl.html",'<h1 class="page-header">Features configuration</h1>\n<tabset>\n	<tab heading="Git">\n		<h3>Git repositories</h3>\n		<p>You can manager your external git repositories over here. For anonymous checkout, please use the https URL.</p>\n		<table class="table table-striped">\n			<tr>\n				<th>ID</th>\n				<th>Repository</th>\n				<th>Username</th>\n				<th>Actions</th>\n			</tr>\n      <tr>\n        <th colspan="3">Private repositories</th>\n        <th>\n          <a class="btn btn-success" ng-click="add(\'featuresrepo_private\', privaterepos)"><i class="fa fa-plus"></i> Add</a>\n        </th>\n      </tr>\n			<tr ng-repeat="repo in privaterepos">\n				<td>{{repo._id}}</td>\n				<td>{{repo.path}}</td>\n				<td>{{repo.user}}</td>\n				<td>\n          <a class="btn btn-success" ng-click="download(repo)" title="Download repository"><i class="fa fa-cloud-download"></i></i></a>\n          <a class="btn btn-warning" ng-click="upload(repo)" title="Upload repository"><i class="fa fa-cloud-upload"></i></i></a>\n          <a class="btn btn-warning" ng-click="edit(repo)" title="Edit repository"><i class="fa fa-cog"></i></i></a>\n          <a class="btn btn-danger" ng-click="delete(repo, privaterepos, $index)" title="Delete repository"><i class="fa fa-trash-o"></i></a>\n				</td>\n			<tr>\n				<th colspan="3">Public repositories</th>\n        <th>\n          <a class="btn btn-success" ng-click="add(\'featuresrepo_public\', publicrepos)"><i class="fa fa-plus"></i> Add</a>\n        </th>\n			</tr>\n			<tr ng-repeat="repo in publicrepos">\n				<td>{{repo._id}}</td>\n				<td>{{repo.path}}</td>\n				<td>{{repo.user}}</td>\n				<td>\n          <a class="btn btn-success" ng-click="download(repo)" title="Download repository"><i class="fa fa-cloud-download"></i></i></a>\n          <a class="btn btn-warning" ng-click="edit(repo)" title="Edit repository"><i class="fa fa-cog"></i></i></a>\n					<a class="btn btn-danger" ng-click="delete(repo, publicrepos, $index)" title="Delete repository"><i class="fa fa-trash-o"></i></a>\n				</td>\n			</tr>\n		</table>\n    <fieldset>\n      <legend ng-click="showHelp = !showHelp">Help (toggle)</legend>\n      <div ng-show="showHelp">\n        <dl>\n          <dt>Private repository</dt>\n          <dd>A private repository is editable on your current website. This means you can edit your features and upload them.</dd>\n          <dt>Public repository</dt>\n          <dd>A public repository is read only, your features can only be edited only and you can only use the features.</dd>\n        </dl>\n      </div>\n    </fieldset>\n  </tab>\n</tabset>')}]),angular.module("features/config/edit.tpl.html",[]).run(["$templateCache",function(a){a.put("features/config/edit.tpl.html",'<div class="modal-header">\n  <h3>Add/edit repository</h3>\n</div>\n<div class="modal-body">\n  <!-- Text input-->\n  <div class="form-group row">\n    <label class="col-md-3 control-label">Repository path</label>  \n    <div class="col-md-9">\n      <input ng-model="repo.path" type="text" placeholder="E.g. github.com/core9/features-test" class="form-control input-md" required="">\n    </div>\n  </div>\n  <!-- Text input-->\n  <div class="form-group row">\n    <label class="col-md-3 control-label">Username</label>  \n    <div class="col-md-9">\n      <input ng-model="repo.user" type="text" placeholder="E.g. yourname" class="form-control input-md">\n    </div>\n  </div>\n  <!-- Text input-->\n  <div class="form-group row">\n    <label class="col-md-3 control-label" for="textinput">Password</label>  \n    <div class="col-md-9">\n      <input ng-model="repo.password" type="password" placeholder="E.g. mypassword" class="form-control input-md">\n    </div>\n  </div>\n  <div class="form-group row">\n    <div class="col-md-12">\n      <button class="btn btn-success pull-right" ng-click="save()">Save</button>\n    </div>\n  </div>\n</div>')}]),angular.module("features/feature.tpl.html",[]).run(["$templateCache",function(a){a.put("features/feature.tpl.html",'<h1 class="page-header">Feature {{feature.name}}</h1>\n<div class="row">\n	<p>You can edit your feature right here, add versions or modify existing versions</p>\n	<!-- Text input-->\n	<div class="row">\n		<label class="col-md-3 control-label">Feature name</label>  \n		<div class="col-md-9">\n			<input id="Feature name" ng-model="feature.name" type="text" placeholder="The name for your feature" class="form-control input-md" required="" />\n		</div>\n	</div>\n	<div class="row">\n		<label class="col-md-3 control-label">Description</label>\n		<div class="col-md-9">                     \n			<textarea class="form-control" id="description" ng-model="feature.description"></textarea>\n		</div>\n	</div>\n</div>\n\n<div class="row">\n	<fieldset>\n		<legend>Versions</legend>\n		<div class="col-xs-12 col-md-4">\n			<h4>Version</h4>\n			<ul class="nav nav-pills nav-stacked">\n				<li ng-repeat="version in feature.versions" ng-click="select(version)" ng-class="{active: $parent.selectedVersion == version, disabled: $parent.selectedVersion}">\n					<a>{{version}}</a>\n				</li>\n			</ul>\n			<div class="input-group">\n				<input type="text" class="form-control" ng-model="versionName" placeholder="e.g. 0.1.5">\n				<span class="input-group-btn">\n					<button class="btn btn-success" ng-click="addVersion(versionName)">Add version</button>\n				</span>\n			</div>\n		</div>\n		<div class="col-xs-12 col-md-4" ng-show="selectedVersion">\n			<h4>Feature Type</h4>\n			<ul class="nav nav-pills nav-stacked">\n				<li ng-repeat="(type, template) in featureTypes" ng-click="$parent.selectedType = type" ng-class="{active: $parent.selectedType == type}">\n					<a>{{type}}</a>\n				</li>\n			</ul>\n		</div>\n		<div class="col-xs-12 col-md-4" ng-show="selectedType">\n			<h4>Contents</h4>\n			<div cn-feature-processor cn-processor-template="featureTypes[selectedType]" cn-selected-items="version[selectedType]"></div>\n		</div>\n	</fieldset>\n</div>\n<div class="row" ng-show="selectedVersion">\n	<fieldset>\n		<legend>Version actions</legend>\n		<button class="btn btn-success" ng-click="saveVersion()">Save</button>\n		<button class="btn btn-warning" ng-click="updateVersion()">Update selected content</button>\n		<button class="btn btn-danger" ng-click="removeVersion()">Delete selected version</button>\n	</fieldset>\n</div>\n<div class="row">\n	<fieldset>\n		<legend>Actions</legend>\n		<div class="pull-right">\n			<button class="btn btn-danger" ng-click="removeFeature()">Delete entire feature</button>\n			<button class="btn btn-success" ng-click="save()">Save</button>\n		</div>\n	</fieldset>\n</div>')}]),angular.module("features/features.tpl.html",[]).run(["$templateCache",function(a){a.put("features/features.tpl.html",'<h1 class="page-header">Features</h1>\n<blockquote>Manage your features in this section. A feature is a set of content, configuration or files. These sets can be exported to and imported from the features</blockquote>\n<tabset>\n	<tab heading="Private" ng-controller="ConfigFeaturesPrivateCtrl">\n		<div ng-include="\'features/repositories/private.tpl.html\'"></div>\n	</tab>\n	<tab heading="Public" ng-controller="ConfigFeaturesPublicCtrl">\n		<div ng-include="\'features/repositories/public.tpl.html\'"></div>\n	</tab>\n</tabset>')}]),angular.module("features/processor/config.modal.tpl.html",[]).run(["$templateCache",function(a){a.put("features/processor/config.modal.tpl.html",'<div>\n    <div class="modal-header">\n        <h3>Select your config</h3>\n    </div>\n    <div class="modal-body">\n        <label>Configuration type</label>\n        <select ng-options="type as type for type in configtypes" ng-model="$parent.configtype"></select>\n        <table class="table table-striped" ng-show="configlist.length > 0">\n            <thead>\n                <tr>\n                    <th>ID</th>\n                    <th>Name</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="config in configlist">\n                    <td ng-click="select(config)" ng-class="{\'bg-success\': isSelected(config._id)}">{{config._id}}</td>\n                    <td ng-click="select(config)" ng-class="{\'bg-success\': isSelected(config._id)}">{{config.name}}</td>\n                </tr>\n            </tbody>\n        </table>\n    </fieldset>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n</div>\n</div>')}]),angular.module("features/processor/config.tpl.html",[]).run(["$templateCache",function(a){a.put("features/processor/config.tpl.html",'<div ng-controller="FeatureProcessorConfigCtrl">\n	<button class="btn btn-success" ng-click="add()" style="width: 100%">Add configuration</button>\n</div>')}]),angular.module("features/processor/content.modal.tpl.html",[]).run(["$templateCache",function(a){a.put("features/processor/content.modal.tpl.html",'<div>\n    <div class="modal-header">\n        <h3>Select your content</h3>\n    </div>\n    <div class="modal-body">\n        <label>Content type</label>\n        <select ng-options="type as type.label for type in contenttypes" ng-model="$parent.contenttype"></select>\n        <table class="table table-striped" ng-show="contentlist.length > 0">\n            <thead>\n                <tr>\n                    <th>ID</th>\n                    <th ng-repeat="(fieldname, field) in contenttype.schema.properties" ng-show="contenttype.schemaOptions[fieldname].showInList">\n                        {{contenttype.schemaOptions[fieldname].label}}\n                    </th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr ng-repeat="content in contentlist">\n                    <td ng-click="select(content)" ng-class="{\'bg-success\': isSelected(content._id)}">{{content._id}}</td>\n                    <td ng-repeat="(fieldname, field) in contenttype.schema.properties" ng-show="contenttype.schemaOptions[fieldname].showInList" ng-click="select(content)" ng-class="{\'bg-success\': isSelected(content._id)}">\n                        {{content[fieldname]}}\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    </fieldset>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-primary" ng-click="ok()">OK</button>\n</div>\n</div>')}]),angular.module("features/processor/content.tpl.html",[]).run(["$templateCache",function(a){a.put("features/processor/content.tpl.html",'<div ng-controller="FeatureProcessorContentCtrl">\n	<button class="btn btn-success" ng-click="add()" style="width: 100%">Add content</button>\n	<h6>Selected (<a ng-click="showSelected = !showSelected">toggle</a>)</h6>\n	<ul class="list-group" ng-show="showSelected">\n		<li ng-repeat="item in selected" class="list-group-item" ng-click="deselect($index)">\n			<a>{{item.id}}</a>\n		</li>\n	</ul>\n</div>')}]),angular.module("features/repositories/private.tpl.html",[]).run(["$templateCache",function(a){a.put("features/repositories/private.tpl.html",'<h4>Private features</h4>\n<p>These are your private (internal) features, they can only be accessed by your own site. Choose a repository to view the features</p>\n<accordion>\n  <accordion-group heading="{{repo.path}}" ng-repeat="repo in repos">\n    <fieldset>\n      <legend>Actions</legend>\n      <div class="form-group row">\n        <div class="col-md-8">\n          <button class="btn btn-success" ng-click="download(repo)"><i class="fa fa-cloud-download"></i> Download</button>\n          <button class="btn btn-warning" ng-click="upload(repo)"><i class="fa fa-cloud-upload"></i> Upload</button>\n        </div>\n      </div>\n    </fieldset>\n    <table class="table table-striped table-bordered">\n      <tr>\n        <th>Feature name</th>\n        <th>Description</th>\n        <th>Versions</th>\n        <th>Actions</th>\n      </tr>\n      <tr ng-repeat="feature in features[repo._id]">\n        <td>{{feature.name}}</td>\n        <td>{{feature.description}}</td>\n        <td>\n          <div ng-if="loading === feature.name">\n            <i class="fa fa-spinner fa-spin"></i> Loading\n          </div>\n          <div ng-if="loading !== feature.name">\n            <select ng-options="version for version in feature.versions" ng-model="repo.current[feature.name]"></select>\n          </div>\n        </td>\n        <td>\n          <button class="btn btn-success" \n                  ng-show="repo.current[feature.name] !== undefined" \n                  ng-click="apply(repo, feature, repo.current[feature.name])">\n            Apply\n          </button>\n          <button class="btn btn-warning" \n                  ng-click="edit(repo, feature.name)">\n            Edit\n          </button>\n          <button \n                  class="btn btn-danger" \n                  ng-show="repo.current[feature.name] != undefined" \n                  ng-click="deactivate(repo, feature)">\n            Deactivate\n          </button>\n        </td>\n      </tr>\n      <tr>\n        <td colspan="4">\n          <div class="form-group row">\n            <label class="col-md-3 control-label">New feature name</label>  \n            <div class="col-md-8 input-group">\n              <input ng-model="featureName" type="text" placeholder="E.g. blog" class="form-control input-md" required="">\n              <span class="input-group-btn">\n                <button class="btn btn-success" ng-click="add(repo, featureName)">Add feature</button>\n              </span>  \n            </div>\n          </div>\n        </td>\n      </tr>\n    </table>\n  </accordion-group>\n</accordion>')}]),angular.module("features/repositories/public.tpl.html",[]).run(["$templateCache",function(a){a.put("features/repositories/public.tpl.html",'<h4>Public features</h4>\n<p>These are public (external) features, you can add new feature repositories via the settings page.</p>\n<accordion>\n  <accordion-group heading="{{repo.path}}" ng-repeat="repo in repos">\n    <fieldset>\n      <legend>Actions</legend>\n      <div class="form-group row">\n        <div class="col-md-8">\n          <button class="btn btn-success" ng-click="download(repo)"><i class="fa fa-cloud-download"></i> Download</button>\n        </div>\n      </div>\n    </fieldset>\n    <table class="table table-striped table-bordered">\n      <tr>\n        <th>Feature name</th>\n        <th>Description</th>\n        <th>Versions</th>\n        <th>Actions</th>\n      </tr>\n      <tr ng-repeat="feature in features[repo._id]">\n        <td>{{feature.name}}</td>\n        <td>{{feature.description}}</td>\n        <td>\n          <div ng-if="loading === feature.name">\n            <i class="fa fa-spinner fa-spin"></i> Loading\n          </div>\n          <div ng-if="loading !== feature.name">\n            <select ng-options="version for version in feature.versions" ng-model="repo.current[feature.name]"></select>\n          </div>\n        </td>\n        <td>\n          <button class="btn btn-success" \n                  ng-show="repo.current[feature.name] !== undefined" \n                  ng-click="apply(repo, feature, repo.current[feature.name])">\n            Apply\n          </button>\n          <button \n                  class="btn btn-danger" \n                  ng-show="repo.current[feature.name] != undefined" \n                  ng-click="deactivate(repo, feature)">\n            Deactivate\n          </button>\n        </td>\n      </tr>\n    </table>\n  </accordion-group>\n</accordion>')}]);